<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KLE.Tech</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="kletech512.jpg">
    <meta name="theme-color" content="#1E1E1E">
    <style>
        /* Prevent text and image selection */
        body {
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently supported by Chrome and Opera */
        }

        /* Prevent images from being draggable */
        img {
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }

        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #ffffff;
        }

        .header-right {
            display: flex;
            align-items: center;
        }

        .tasks-icon {
            margin-right: 10px;
            cursor: pointer;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: #1E1E1E;
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }

        main {
            flex: 1;
            overflow-y: auto;
            background-color: #121212;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .logo img {
            height: 40px;
            margin-right: 10px;
        }

        footer {
            display: flex;
            justify-content: space-around;
            background-color: #1E1E1E;
            padding: 10px 0;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            position: relative;
            z-index: 10;
        }

        .footer-item {
            text-align: center;
            flex: 1;
            color: #B0B0B0;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .footer-item svg {
            width: 24px;
            height: 24px;
            margin-bottom: 5px;
            transition: transform 0.3s ease;
        }

        .footer-item:hover svg {
            transform: scale(1.2);
        }

        .footer-item:hover {
            color: #ffffff;
        }

        .footer-item.active {
            color: #ffffff;
        }

        .footer-item.active svg {
            transform: scale(1.2);
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .error-message {
            color: red;
            text-align: center;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header id="app-header">
            <div class="header-left">
                <div class="logo">
                    <img src="kletech192.jpg" alt="KLE.Tech Logo">
                    <span>KLE.Tech</span>
                </div>
            </div>
            <div class="header-right">
                <div class="tasks-icon" onclick="loadTasks()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 1 1 0 1.5H8v4.25a.75.75 0 1 1-1.5 0V8H2.75a.75.75 0 0 1 0-1.5H6V2.75A.75.75 0 0 1 6.75 2H8z"/>
                    </svg>
                </div>
            </div>
        </header>
        <main id="content-main">
            <iframe id="content-frame" src="https://kletechbvb.github.io/homescreen/"></iframe>
            <div id="error-message" class="error-message" style="display: none;"></div>
        </main>
        <footer>
            <div class="footer-item active" onclick="loadContent('Home')">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16"> 
                    <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 2 7.5V14a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V7.5a.5.5 0 0 0-.146-.354l-6-6zM13 13h-2v-3a1 1 0 1 0-2 0v3H5v-5.5l3-3 3 3V13z"/>
                </svg>
                <span>Home</span>
            </div>
            <div class="footer-item" onclick="openExternalSite('https://learn.kletech.ac.in/login/index.php')">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-book" viewBox="0 0 16 16"> 
                    <path d="M1 2.828c.885-.37 2.274-.586 4-.586s3.115.216 4 .586c.885-.37 2.274-.586 4-.586s3.115.216 4 .586V14.5c0 .5-.5.5-.5.5h-15s-.5 0-.5-.5V2.828zM2 14h13V3.184C13.548 3.01 12.432 2.5 10.5 2.5S7.452 3.01 6 3.184v10.816H2V14z"/> 
                </svg>
                <span>LMS</span>
            </div>
            <div class="footer-item" onclick="openExternalSite('https://parents.kletech.ac.in/kletechparenteven2024/index.php?option=com_studentdashboard&controller=studentdashboard&task=dashboard')">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16"> 
                    <path d="M10.97 4.97a.75.75 0 1 1 1.06 1.06L7.25 10.81 4.97 8.53a.75.75 0 0 1 1.06-1.06l1.22 1.22 3.72-3.72z"/> 
                </svg>
                <span>Contineo</span>
            </div>
            <div class="footer-item" onclick="loadContent('YearPlan')">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-calendar" viewBox="0 0 16 16"> 
                                       <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zm9 2H3v2h10V2zm-10 3H2v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5H3z"/> 
                </svg>
                <span>Year Plan</span>
            </div>
        </footer>
    </div>

    <script>
        function loadContent(page) {
            // Replace with the appropriate URLs for your pages
            var pageUrl = '';
            switch (page) {
                case 'Home':
                    pageUrl = 'https://kletechbvb.github.io/homescreen/';
                    break;
                case 'YearPlan':
                    pageUrl = 'your-year-plan-url';
                    break;
                default:
                    pageUrl = 'https://kletechbvb.github.io/homescreen/';
            }
            document.getElementById('content-frame').src = pageUrl;
        }

        function openExternalSite(url) {
            window.open(url, '_blank');
        }

        function loadTasks() {
            // Implement your task loading logic here
        }

        // Handle back button press
        window.addEventListener('popstate', function(event) {
            const iframe = document.getElementById('content-frame');
            if (iframe.contentWindow.history.length > 1) {
                iframe.contentWindow.history.back();
            } else {
                // If no more history in iframe, handle back press normally
                history.back();
            }
        });

        // Initial push state to enable popstate event
        window.history.pushState({}, '');

        // Intercept back button press within the iframe
        window.addEventListener('message', function(event) {
            if (event.data === 'navigateBack') {
                if (iframe.contentWindow.history.length > 1) {
                    iframe.contentWindow.history.back();
                } else {
                    history.back();
                }
            }
        });

        // Communication with the iframe
        const iframe = document.getElementById('content-frame');
        iframe.onload = function() {
            iframe.contentWindow.postMessage('registerBackButtonHandler', '*');
        };
    </script>
</body>
</html>

